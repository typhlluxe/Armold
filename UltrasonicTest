package movingTest;

import lejos.hardware.Sound;
import lejos.hardware.motor.Motor;
import lejos.hardware.port.SensorPort;
import lejos.hardware.sensor.EV3UltrasonicSensor;
import lejos.robotics.RangeFinderAdapter;
import lejos.robotics.chassis.Wheel;
import lejos.robotics.chassis.WheeledChassis;
import lejos.robotics.navigation.MovePilot;
import lejos.utility.Timer;
import lejos.utility.TimerListener;

public class UltrasonicTest 
{
	
	private  boolean noObstacle = true;
	private MovePilot pilot;
	private EV3UltrasonicSensor ultra;
	
	public  UltrasonicTest() {
		// TODO Auto-generated constructor stub
		Wheel[] wheels = new Wheel[2];
		wheels[0] = WheeledChassis.modelWheel(Motor.A, 2.1).offset(70);
		wheels[1] = WheeledChassis.modelWheel(Motor.D, 2.1).offset(-70);
		WheeledChassis chasis = new WheeledChassis(wheels, WheeledChassis.TYPE_DIFFERENTIAL);
		pilot = new MovePilot(chasis); 
		ultra = new EV3UltrasonicSensor(SensorPort.S1);
		
		init(pilot, ultra);
	}
	
	private static void init(final MovePilot pilot, EV3UltrasonicSensor ultra) 
	{
		Sound.beepSequenceUp();  // make sound when ready.
		RangeFinderAdapter sonar = new RangeFinderAdapter(ultra); 
		pilot.setAngularSpeed(10); // cm per second
		
		pilot.travel(20);

		pilot.stop();
	}
		
	private void sensorCheck(RangeFinderAdapter sonar) {
		if (sonar.getRange() < 0.25f) {
			//obstacleAhead();
			Sound.beep();
			noObstacle = false;
		} else {
			noObstacle = true;
		}
	}
	
	private  void move(MovePilot pilot) 
	{
		recover(pilot);
	}
	
	private static void recover(MovePilot pilot) 
	{
		
		pilot.rotateLeft();
	}
	
	public static void main(String[] args) 
	{	
		new UltrasonicTest();
	}

}
